<!DOCTYPE html>
<html lang="en" xmlns:http="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Register</title>
    <link href=" http://localhost:8888/ref/css/login.css" rel="stylesheet">

</head>
<body>
<form class="box" action="/api/user/register" method="post" onsubmit="return check_all()">
    <h1>在线茶叶销售系统注册</h1>
    <input type="text" name="username"  id="username" maxlength="16" placeholder="请输入用户名">
    <input type="password" name="password" id="f-password" placeholder="请输入密码">
    <input type="password" name="password1" id="s-password" placeholder="请确认密码" onblur="checkpassword()">
    <input type="text" name="nickname" id="nickname" placeholder="请输入昵称">
    <input type="text" name="mobile" id="phone" placeholder="请输入电话号码" onblur="checkPhone()">
    <input type="text" name="e-mail" id="e-mail" placeholder="请输入邮箱" onblur="check_email()"> <!--地址改成邮箱-需要正则表达式验证-->
    <input type="submit" value="注册"  >
</form>
</body>
<script>
    function checkpassword() {
    var x =document.getElementById("f-password").value
        var y = document.getElementById("s-password").value
        if (x!=y){
            alert("前后两次密码不一样，请重新修改！");
            document.getElementById("s-password").value="";
        }
    }
    function checkPhone(){
        var phone = document.getElementById('phone').value;
        if(!(/^1(3|4|5|6|7|8|9)\d{9}$/.test(phone))){
            alert("手机号码有误，请重填");
          document.getElementById("phone").value="";
        }
    }
    var RegEmail = /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
    function check_email(){
        var e= document.getElementById("e-mail").value
        if (!RegEmail.test(e)){
            alert("邮箱格式不正确，请重新修改！")
            document.getElementById("e-mail").value="";
        }
    }
    function check_all(){
        var username=document.getElementById("username").value;
        var nickname=document.getElementById("nickname").value;
        var fpassword=document.getElementById("f-password").value;
        var spassword=document.getElementById("s-password").value;
        var phone    =document.getElementById("phone").value;
        var email=document.getElementById("e-mail").value;

        if (username == "请输入用户名" ||nickname=="请输入昵称" ||fpassword=="请输入密码"||spassword=="请确认密码"||phone=="请输入电话号码"||email=="请输入邮箱"){
                alert("信息尚未完整，请继续填写👇")
            return false;

        }else {
            return true;
        }
        console.log(check_all())


    }
</script>
</html>